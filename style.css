/* =========================
   Cousins Rummy Room — Shared UI (Lobby + Practice)
   ========================= */

:root{
  --panel: rgba(10,14,22,.62);
  --panel2: rgba(0,0,0,.22);
  --stroke: rgba(160,210,255,.22);
  --stroke2: rgba(160,210,255,.14);
  --text: rgba(240,248,255,.92);
  --muted: rgba(240,248,255,.62);
  --danger: #ff5b5b;
  --accent: rgba(120,210,255,.85);

  /* ✅ Slightly bigger & clearer cards */
  --card-w: clamp(54px, 14vw, 78px);
  --card-h: calc(var(--card-w) * 1.38);

  /* Deck back size (smaller than cards) */
  --deck-w: clamp(52px, 10vw, 70px);
  --deck-h: calc(var(--deck-w) * 1.38);
}

*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html, body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  color:var(--text);
  font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial;
  background:#000;
  overflow-x:hidden;
}

/* ✅ Lobby scrolls normally */
body{
  overflow-y:auto;
  overscroll-behavior: none;
}

/* ✅ Practice locks page scroll (one-screen app) */
body.practice{
  overflow:hidden;
}

/* Background layer */
.bg{
  position:fixed;
  inset:0;
  z-index:-1;
  background:
    radial-gradient(1200px 800px at 20% 10%, rgba(255,140,80,.20), transparent 60%),
    radial-gradient(900px 700px at 70% 40%, rgba(80,180,255,.18), transparent 60%),
    radial-gradient(1200px 900px at 40% 90%, rgba(40,255,180,.08), transparent 60%),
    linear-gradient(180deg, rgba(6,8,14,.86), rgba(6,8,14,.92));
}

/* Optional “bar” photo layer (drop bar.jpg into repo root if you want) */
body.practice .bg{
  background:
    linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.70)),
    url("./bar.jpg") center/cover no-repeat,
    radial-gradient(1200px 800px at 20% 10%, rgba(255,140,80,.14), transparent 60%),
    radial-gradient(900px 700px at 70% 40%, rgba(80,180,255,.14), transparent 60%),
    linear-gradient(180deg, rgba(6,8,14,.86), rgba(6,8,14,.92));
}

/* Safe wrapper */
.safe{
  min-height:100dvh;
  width:100vw;
  padding:
    env(safe-area-inset-top)
    env(safe-area-inset-right)
    env(safe-area-inset-bottom)
    env(safe-area-inset-left);
  display:flex;
  justify-content:center;
  align-items:stretch;
}

/* Container */
.shell{
  width:min(980px, 100vw);
  max-width:100%;
  margin:0 auto;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* ---------- Branding ---------- */
.title{
  font-size:28px;
  font-weight:900;
  letter-spacing:.5px;
  text-shadow: 0 0 22px rgba(255,155,105,.35);
}
.subtitle{
  font-size:34px;
  font-weight:900;
  color:rgba(160,220,255,.95);
  text-shadow: 0 0 26px rgba(100,200,255,.28);
  margin-top:2px;
}
.underline{
  width:220px;
  height:4px;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(110,220,255,.0), rgba(110,220,255,.9), rgba(110,220,255,.0));
  box-shadow: 0 0 20px rgba(110,220,255,.45);
  margin-top:8px;
}

.panel{
  background: var(--panel);
  border:1px solid var(--stroke);
  border-radius:18px;
  box-shadow: 0 0 26px rgba(0,0,0,.35);
  overflow:hidden;
  padding:12px;
}
.row{ display:flex; justify-content:space-between; align-items:center; gap:12px; }
.small{ font-size:12px; color:var(--muted); }

.input{
  width:100%;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.28);
  color:var(--text);
  outline:none;
  font-size:16px;
}
.btn{
  width:100%;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.25);
  color:var(--text);
  font-weight:800;
  user-select:none;
}
.btn.cyan{
  border:1px solid rgba(120,210,255,.40);
  box-shadow: 0 0 18px rgba(120,210,255,.16);
}
.btn:disabled{ opacity:.45; }

.list{ margin-top:10px; display:flex; flex-direction:column; gap:8px; }
.item{
  padding:10px;
  border-radius:14px;
  background: rgba(0,0,0,.22);
  border:1px solid rgba(160,210,255,.12);
}
.chat{
  max-height:240px;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  padding-right:4px;
}

/* =========================================
   PRACTICE — one-screen layout
   ========================================= */

.hdr{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
}
.brand .title{ font-size:22px; }
.brand .subtitle{ font-size:28px; }
.exitMini{
  padding:8px 12px;
  border-radius:12px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.25);
  box-shadow: 0 0 18px rgba(0,0,0,.35);
  user-select:none;
}

.turnBanner{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 12px;
  border-radius:16px;
  background: var(--panel);
  border:1px solid var(--stroke);
  box-shadow: 0 0 26px rgba(0,0,0,.35);
}
.turnBanner .muted{ color:var(--muted); font-size:12px; }
.danger{ color:var(--danger); font-weight:900; }

.gameLayout{
  height:100dvh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.gameMain{
  flex:1;
  min-height:0;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom:10px;
}

/* Opponents */
.seatRow{
  display:flex;
  gap:10px;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom:4px;
  touch-action: pan-x;
}
.seatRow::-webkit-scrollbar{ display:none; }
.seatBox{
  min-width:180px;
  border-radius:16px;
  padding:10px;
  background: var(--panel2);
  border:1px solid rgba(160,210,255,.16);
}
.seatBox b{ font-size:14px; }
.activeTurn{
  box-shadow: 0 0 0 2px rgba(120,210,255,.45), 0 0 28px rgba(120,210,255,.16);
}

/* ✅ Unwanted big + center, Deck small right */
.centerRow{
  display:grid;
  grid-template-columns: 1fr 160px;
  gap:12px;
  align-items:stretch;
}
.pileBox{
  border-radius:16px;
  padding:10px;
  background: var(--panel2);
  border:1px solid rgba(160,210,255,.16);
  overflow:hidden;
}
.pileBox.unwantedBig{
  min-height: 140px;
}
.pileBox.deckSmall{
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
}

/* Deck stack (smaller) */
.deckStack{
  position:relative;
  width: calc(var(--deck-w) + 18px);
  height: calc(var(--deck-h) + 18px);
  margin:10px auto 6px;
}
.back{
  position:absolute;
  inset:0;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  box-shadow: 0 0 28px rgba(0,0,0,.35);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.10), transparent 60%),
    linear-gradient(135deg, rgba(80,160,255,.35), rgba(40,255,200,.18)),
    repeating-linear-gradient(45deg, rgba(255,255,255,.10) 0 6px, rgba(255,255,255,.02) 6px 12px);
}
.deckStack .label{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  font-weight:900;
  letter-spacing:1px;
  opacity:.9;
}
.hint{ font-size:12px; color:var(--muted); text-align:center; margin-top:6px; }

/* ✅ Top card tap area (big + reliable) */
.unwantedTopTap{
  margin-top:8px;
  width:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(160,210,255,.16);
  background: rgba(0,0,0,.22);
  user-select:none;
  touch-action: manipulation;
}
.unwantedTopTap:active{ transform: scale(.99); }
.unwantedTopTap b{ font-size:14px; }

/* Peek strip */
.peekWrap{ margin-top:10px; overflow:hidden; }
.peekStrip{
  display:flex;
  gap:10px;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-x !important;
  padding:6px 2px 8px;
  scrollbar-width:none;
}
.peekStrip::-webkit-scrollbar{ display:none; }
.peekCard{ flex:0 0 auto; opacity:.88; transform: scale(.96); }
.peekCard.active{
  opacity:1;
  transform: scale(1);
  filter: drop-shadow(0 0 12px rgba(120,210,255,.22));
}

/* Cards (clear suits) */
.card{
  width: var(--card-w);
  height: var(--card-h);
  border-radius:14px;
  background: rgba(255,255,255,.98);
  border:1px solid rgba(0,0,0,.10);
  position:relative;
  overflow:hidden;
  box-shadow: 0 10px 22px rgba(0,0,0,.25);
  user-select:none;
  flex:0 0 auto;
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 20% 20%, rgba(255,255,255,.75), transparent 45%);
  opacity:.9;
}
.card.red{ color:#d81e2f; }
.card.black{ color:#111; }

.corner{
  position:absolute;
  font-weight:900;
  font-size:13px;
  line-height:1.05;
}
.corner.tl{ top:6px; left:6px; }
.corner.br{ bottom:6px; right:6px; transform: rotate(180deg); }

.pip{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  font-size:34px; /* ✅ clearer suit */
  opacity:.95;
}

/* Selected / new draw highlight */
.card.sel{
  outline:2px solid rgba(120,210,255,.9);
  box-shadow: 0 0 0 2px rgba(120,210,255,.35), 0 12px 26px rgba(0,0,0,.30);
  transform: translateY(-4px);
}

/* Buttons */
.btnRow{ display:flex; gap:10px; }

/* Meld tray */
.meldTray{
  border-radius:16px;
  padding:10px;
  background: var(--panel2);
  border:1px solid rgba(160,210,255,.16);
}
.meldTrayHead{ display:flex; justify-content:space-between; align-items:center; }
.meldTrayBody{
  margin-top:8px;
  display:flex;
  gap:10px;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom:6px;
  touch-action: pan-x;
  scrollbar-width:none;
}
.meldTrayBody::-webkit-scrollbar{ display:none; }
.meldBlock{
  flex:0 0 auto;
  border-radius:14px;
  padding:8px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(160,210,255,.12);
}

/* Hand bar bottom */
.handBar{
  position:sticky;
  bottom:0;
  z-index:5;
  border-radius:18px;
  padding:10px;
  background: rgba(0,0,0,.34);
  border:1px solid rgba(160,210,255,.18);
  backdrop-filter: blur(10px);
}
.handHead{ display:flex; justify-content:space-between; align-items:center; gap:10px; }

/* ✅ Smooth, non-fighting hand slider */
#hand{
  display:flex;
  gap:10px;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-x !important;
  padding:10px 2px 6px;
  scrollbar-width:none;
}
#hand::-webkit-scrollbar{ display:none; }

/* Small phones */
@media (max-width: 420px){
  .brand .subtitle{ font-size:24px; }
  .brand .title{ font-size:18px; }
  .underline{ width:160px; }
  .seatBox{ min-width:160px; }
  .centerRow{ grid-template-columns: 1fr 140px; }
}