/* =========================
   Cousins Rummy Room — Shared UI (Lobby + Practice)
   Goals:
   - Lobby stays beautiful and scrolls normally
   - Practice stays on ONE screen (no long scrolling)
   - Horizontal swipe areas NEVER fight your finger
   - No left-shift on iPhone/Android
   ========================= */

:root{
  --panel: rgba(10,14,22,.62);
  --panel2: rgba(0,0,0,.22);
  --stroke: rgba(160,210,255,.22);
  --stroke2: rgba(160,210,255,.14);
  --text: rgba(240,248,255,.92);
  --muted: rgba(240,248,255,.62);
  --danger: #ff5b5b;

  /* Default card size (Practice overrides smaller) */
  --card-w: clamp(44px, 12vw, 70px);
  --card-h: calc(var(--card-w) * 1.35);
}

*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html, body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  color:var(--text);
  font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial;
  background:#000;
  overflow-x:hidden; /* stops sideways drift */
}

/* ✅ LOBBY default: allow scrolling */
body{
  overflow-y:auto;
  overscroll-behavior: none;
}

/* ✅ PRACTICE: lock page scroll (only internal areas scroll) */
body.practice{
  overflow:hidden;

  /* smaller cards to fit everything on phones */
  --card-w: clamp(34px, 9vw, 56px);
  --card-h: calc(var(--card-w) * 1.35);
}

/* Background */
.bg{
  position:fixed;
  inset:0;
  z-index:-1;
  background:
    radial-gradient(1200px 800px at 20% 10%, rgba(255,140,80,.20), transparent 60%),
    radial-gradient(900px 700px at 70% 40%, rgba(80,180,255,.18), transparent 60%),
    radial-gradient(1200px 900px at 40% 90%, rgba(40,255,180,.08), transparent 60%),
    linear-gradient(180deg, rgba(6,8,14,.86), rgba(6,8,14,.92));
}

/* Optional bar background for practice:
   Add an image named bar.jpg in repo root if you want.
*/
body.practice .bg{
  background:
    linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.74)),
    url("./bar.jpg") center/cover no-repeat,
    radial-gradient(1200px 800px at 20% 10%, rgba(255,140,80,.20), transparent 60%),
    radial-gradient(900px 700px at 70% 40%, rgba(80,180,255,.18), transparent 60%),
    linear-gradient(180deg, rgba(6,8,14,.86), rgba(6,8,14,.92));
}

/* Safe wrapper (notch friendly) */
.safe{
  min-height:100dvh;
  width:100vw;
  padding:
    env(safe-area-inset-top)
    env(safe-area-inset-right)
    env(safe-area-inset-bottom)
    env(safe-area-inset-left);
  display:flex;
  justify-content:center;
  align-items:stretch;
}

/* Container */
.shell{
  width:min(980px, 100vw);
  max-width:100%;
  margin:0 auto;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* Titles */
.title{
  font-size:28px;
  font-weight:900;
  letter-spacing:.5px;
  text-shadow: 0 0 22px rgba(255,155,105,.35);
}
.subtitle{
  font-size:34px;
  font-weight:900;
  color:rgba(160,220,255,.95);
  text-shadow: 0 0 26px rgba(100,200,255,.28);
  margin-top:2px;
}
.underline{
  width:220px;
  height:4px;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(110,220,255,.0), rgba(110,220,255,.9), rgba(110,220,255,.0));
  box-shadow: 0 0 20px rgba(110,220,255,.45);
  margin-top:8px;
}

/* Panels */
.panel{
  background: var(--panel);
  border:1px solid var(--stroke);
  border-radius:18px;
  box-shadow: 0 0 26px rgba(0,0,0,.35);
  overflow:hidden;
  padding:12px;
}
.row{ display:flex; justify-content:space-between; align-items:center; gap:12px; }
.small{ font-size:12px; color:var(--muted); }

/* Inputs / Buttons */
.input{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.28);
  color:var(--text);
  outline:none;
  font-size:16px; /* prevents iOS zoom */
}
.btn{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.25);
  color:var(--text);
  font-weight:800;
  user-select:none;
}
.btn.cyan{
  border:1px solid rgba(120,210,255,.40);
  box-shadow: 0 0 18px rgba(120,210,255,.16);
}
.btn:disabled{ opacity:.45; }

.list{ margin-top:10px; display:flex; flex-direction:column; gap:8px; }
.item{
  padding:10px;
  border-radius:14px;
  background: rgba(0,0,0,.22);
  border:1px solid rgba(160,210,255,.12);
}

/* =============================
   PRACTICE GAME (ONE SCREEN)
   ============================= */

.gameLayout{
  height:100dvh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.gameMain{
  flex:1;
  min-height:0;
  overflow:auto; /* internal vertical scroll only if needed */
  -webkit-overflow-scrolling: touch;
  padding-bottom:10px;
}

/* Header (smaller in game) */
.hdr{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
}
.brand .title{ font-size:20px; }
.brand .subtitle{ font-size:26px; }
.exitMini{
  padding:8px 12px;
  border-radius:12px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.25);
  box-shadow: 0 0 18px rgba(0,0,0,.35);
  user-select:none;
}

.turnBanner{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 12px;
  border-radius:16px;
  background: var(--panel);
  border:1px solid var(--stroke);
  box-shadow: 0 0 26px rgba(0,0,0,.35);
}
.turnBanner .muted{ color:var(--muted); font-size:12px; }
.danger{ color:var(--danger); font-weight:900; }

/* ✅ Horizontal swipe zones — NO fighting */
#hand, .peekStrip, .seatRow, .meldTrayBody{
  display:flex;
  gap:10px;
  flex-wrap:nowrap;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-x !important;
  overscroll-behavior-x: contain;
  scroll-snap-type:none !important;
  scrollbar-width:none;
}
#hand::-webkit-scrollbar,
.peekStrip::-webkit-scrollbar,
.seatRow::-webkit-scrollbar,
.meldTrayBody::-webkit-scrollbar{ display:none; }

/* Opponents row */
.seatRow{ padding-bottom:4px; }
.seatBox{
  min-width:170px;
  border-radius:16px;
  padding:10px;
  background: var(--panel2);
  border:1px solid rgba(160,210,255,.16);
}
.seatBox b{ font-size:14px; }
.activeTurn{
  box-shadow: 0 0 0 2px rgba(120,210,255,.45), 0 0 28px rgba(120,210,255,.16);
}

/* Center layout */
.centerRow{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
.pileBox{
  border-radius:16px;
  padding:10px;
  background: var(--panel2);
  border:1px solid rgba(160,210,255,.16);
  overflow:hidden;
}

/* Deck stack */
.deckStack{
  position:relative;
  width: calc(var(--card-w) + 18px);
  height: calc(var(--card-h) + 18px);
  margin:10px auto 6px;
}
.back{
  position:absolute;
  inset:0;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  box-shadow: 0 0 28px rgba(0,0,0,.35);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.10), transparent 60%),
    linear-gradient(135deg, rgba(80,160,255,.35), rgba(40,255,200,.18)),
    repeating-linear-gradient(45deg, rgba(255,255,255,.10) 0 6px, rgba(255,255,255,.02) 6px 12px);
}
.deckStack .label{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  font-weight:900;
  letter-spacing:1px;
  opacity:.85;
}

.hint{
  font-size:11px;
  color:var(--muted);
  text-align:center;
  margin-top:6px;
}

/* Unwanted peek strip */
.peekWrap{ margin-top:10px; overflow:hidden; }
.peekCard{ flex:0 0 auto; opacity:.85; transform: scale(.94); }
.peekCard.active{
  opacity:1;
  transform: scale(1);
  filter: drop-shadow(0 0 10px rgba(120,210,255,.20));
}

/* Cards */
.card{
  width: var(--card-w);
  height: var(--card-h);
  border-radius:14px;
  background: rgba(255,255,255,.96);
  border:1px solid rgba(0,0,0,.10);
  position:relative;
  overflow:hidden;
  box-shadow: 0 10px 22px rgba(0,0,0,.25);
  user-select:none;
  flex:0 0 auto;
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 20% 20%, rgba(255,255,255,.70), transparent 45%);
  opacity:.85;
}
.card.red{ color:#d81e2f; }
.card.black{ color:#111; }

.corner{
  position:absolute;
  font-weight:900;
  font-size:12px;
  line-height:1.05;
}
.corner.tl{ top:6px; left:6px; }
.corner.br{ bottom:6px; right:6px; transform: rotate(180deg); }
.pip{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  font-size:28px;
  opacity:.95;
}

.card.sel{
  outline:2px solid rgba(120,210,255,.9);
  box-shadow: 0 0 0 2px rgba(120,210,255,.35), 0 12px 26px rgba(0,0,0,.30);
  transform: translateY(-4px);
}

/* Buttons row */
.btnRow{ display:flex; gap:10px; }

/* Meld tray */
.meldTray{
  border-radius:16px;
  padding:10px;
  background: var(--panel2);
  border:1px solid rgba(160,210,255,.16);
}
.meldTrayHead{ display:flex; justify-content:space-between; align-items:center; }
.meldBlock{
  flex:0 0 auto;
  border-radius:14px;
  padding:8px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(160,210,255,.12);
}

/* Hand bar */
.handBar{
  position:sticky;
  bottom:0;
  z-index:5;
  border-radius:18px;
  padding:10px;
  background: rgba(0,0,0,.34);
  border:1px solid rgba(160,210,255,.18);
  backdrop-filter: blur(10px);
}

/* Small phones */
@media (max-width: 420px){
  .brand .subtitle{ font-size:24px; }
  .brand .title{ font-size:18px; }
  .underline{ width:160px; }
  .seatBox{ min-width:160px; }
  .centerRow{ grid-template-columns: 1fr; }
}